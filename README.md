# üõ°Ô∏è The Contextual Integrity Index ($\mathbf{CIx}$): A Dual-Axis, Diagnostic Framework for LLM Hallucination

## Project Overview

The **Contextual Integrity Index ($\mathbf{CIx}$)** is a novel, physics-inspired, dual-axis metric designed to provide a precise, diagnostic measure of Large Language Model (LLM) reliability and hallucination.

Unlike simple aggregate scores, the $\mathbf{CIx}$ framework assesses both the **quantity** and the **structural consistency** of ungrounded content, moving beyond "is it right?" to "is it *consistently* right and *contextually* relevant?"

**Note:** Due to the computational overhead of the multi-step analysis ($\mathbf{C_t}$ generation, FFT, R-Score), the $\mathbf{CIx}$ is positioned as a **safety-critical extension for high-stakes domains** (e.g., Healthcare, Legal, Finance).

---

## üõ†Ô∏è Core Framework Components

The $\mathbf{CIx}$ is a vector $\mathbf{CIx} = (\mathbf{HM}_{\text{ERR}}, \mathbf{HM}_{\text{FFT}})$ calculated from a normalized, token-level **Grounding Confidence Signal ($\mathbf{C_t} \in [0, 1]$)**.

### 1. X-Axis: Systemic Error Rate ($\mathbf{HM}_{\text{ERR}}$)

This component measures the **aggregate proportion** of ungrounded content. It is derived from an analogy to AC Power Quality analysis, where:

$$
\mathbf{HM}_{\text{ERR}} = \frac{Q}{S} = \frac{\text{Reactive Power (Hallucination)}}{\text{Apparent Power (Total Generative Capacity)}}
$$

* **P (Grounded Truth):** Content with High $\mathbf{C_t}$.
* **Q (Hallucination):** Content with Low $\mathbf{C_t}$.
* **S (Total):** $P + Q$.

### 2. Y-Axis: Structural Volatility ($\mathbf{HM}_{\text{FFT}}$)

This component measures the **consistency and structural stability** of the confidence signal using the **Fast Fourier Transform (FFT)**. It quantifies the frequency and severity of positional integrity shifts.

$$
\mathbf{HM}_{\text{FFT}} = \frac{E_{\text{AC}}}{E_{\text{DC}} + E_{\text{AC}}}
$$

* **$E_{\text{DC}}$:** DC energy (Aggregate, steady confidence).
* **$E_{\text{AC}}$:** AC energy (Volatility, representing structural instability).

### 3. Tertiary Filter: Contextual Relevance ($\mathbf{R}$-Score)

The $\mathbf{R}$-Score is a critical gate that ensures the output is relevant to the input query.

* **Metric:** Cosine Similarity between the embedded input prompt and the embedded final output text.
* **Function:** Filters out **Contextual Drift**‚Äîoutputs that are structurally sound ($\mathbf{CIx}$ is low) but irrelevant to the user's intent (e.g., $\mathbf{R} < 0.75$).

---

## üìà The $\mathbf{CIx}$ Diagnostic Plane

The combination of the two orthogonal metrics allows for the classification of LLM failure modes in a 2D plane. A perfect output state is the origin **(0, 0)**.



| Quadrant | $\mathbf{HM}_{\text{ERR}}$ (Error) | $\mathbf{HM}_{\text{FFT}}$ (Volatility) | Failure Description |
| :--- | :---: | :---: | :--- |
| **Ideal Integrity** | Low | Low | Low error rate, high structural consistency. |
| **Passive Failure** | **High** | Low | High error rate, but errors are consistently distributed (e.g., confidently wrong). |
| **Erratic Failure** | Low | **High** | Low overall error, but extreme instability (frequent, rapid switching between grounded/ungrounded claims). |
| **Chaotic Failure** | **High** | **High** | High overall error rate and extreme structural instability. |

---

## üöÄ Usage and Implementation Guide

The $\mathbf{CIx}$ translates directly into actionable guardrails for safety-critical LLM deployment.

### Prerequisites

* **Token-level Grounding Confidence Signal ($\mathbf{C_t}$):** Must be generated by an external fact-checker or a robust internal uncertainty model (e.g., utilizing $\mathbf{k}$-nearest neighbors or self-evaluation). **The $\mathbf{C_t}$ signal is a prerequisite for this framework.**

### Guardrail Logic (Conceptual Thresholds)

1.  **Contextual Drift Filter ($\mathbf{R}$-Score):**
    * **If $\mathbf{R} < 0.75$:** Trigger response regeneration. If regeneration fails, append a formal warning to the output: "Warning: The final answer trends to get away from your original input requirements."
2.  **Structural and Systemic Integrity Filter ($\mathbf{CIx}$):**
    * **If $\mathbf{HM}_{\text{ERR}} > 0.25$** **OR** **$\mathbf{HM}_{\text{FFT}} > 0.25$**: The LLM output is flagged with a high-severity warning (e.g., "Warning: This output contains structural instability and should not be used for patient care.").

### Example: Chaotic Failure Mode in a High-Stakes Domain

**Session $\mathbf{CIx} \approx (0.75, 0.80)$ (High Error, High Volatility)**

This diagnosis indicates an output that is both predominantly ungrounded AND structurally unstable, such as: "The diagnosis could be **Dengue Fever**, [High $\mathbf{C_t}$]... However, the symptoms are also consistent with **Hepatitis Z-14, a new virus endemic only to Iceland** [Low $\mathbf{C_t}$]..."

**Action:** Output is flagged with a critical warning, as deployment could lead to significant harm.

---

## ü§ù Open Collaboration and Citation

We formally **invite researchers, engineers, and organizations** to collaborate in the empirical validation, thresholding, and advanced implementation of the $\mathbf{CIx}$ to advance the field of LLM integrity measurement.

### Citation

This framework is presented in the following correspondence:

> Chaiya Tantisukarom. (2025). The Contextual Integrity Index ($\mathbf{CIx}$): A Dual-Axis, Physics-Inspired Framework for LLM Hallucination Measurement. (Pre-print/Correspondence)

---
*Assisted by Gemini, an AI large language model developed by Google, for drafting and refinement.*
